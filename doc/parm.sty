\usepackage{luatextra}
\usepackage{polyglossia}
\usepackage{ulem}
\usepackage{framed}
\usepackage{color}
\usepackage{geometry}
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{unicode-math}
\usepackage[hidelinks]{hyperref}
\usepackage{latexsym}
\usepackage{pdflscape}
\usepackage{pdfpages}
\usepackage{enumitem}
\usepackage{titlesec}
\usepackage{lastpage}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{float}
\usepackage{pdfpages}
\usepackage{ccicons}
\usepackage{array}
\usepackage{listings}
\usepackage{tocloft}
\usepackage{etoolbox}
\usepackage{tikz-timing}
\usepackage{ifluatex}
\ifluatex
\usepackage{pdftexcmds}
\makeatletter
\let\pdfstrcmp\pdf@strcmp
\let\pdffilemoddate\pdf@filemoddate
\makeatother
\fi
\usepackage{svg}
\setmathfont{XITSMath-Regular.otf}
\usepackage{tabularx}
\usepackage{bytefield}
\setmainlanguage{french}
\selectlanguage{french}
\setdefaultlanguage{french}
%%\setmainfont{Latin Modern Roman}
\setmainfont{Roboto}

\geometry{margin={1in,1in}}

\setlist{nosep} %% No space between lists' items

\pagestyle{fancy}
\fancyhead[R]{}

%% Apply fancy to first page of ToC as well
\addtocontents{toc}{\protect\thispagestyle{fancy}}

%% <current page>/<total pages> footer
\cfoot{\thepage/\pageref{LastPage}}



\hypersetup{
    colorlinks=true,
    linktoc=all,
    linkcolor=black,
    urlcolor=blue,
}

\setlength{\parindent}{0em}
\setlength{\parskip}{1em}


\newcommand\image[2]{
    \directlua{
	local image = img.scan({filename = "#1"})

    image.height = image.height * #2
    image.width  = image.width  * #2

    node.write(img.node(image))
}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \subsubsubsection command definition %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\titleclass{\subsubsubsection}{straight}[\subsection]

\newcounter{subsubsubsection}[subsubsection]
\renewcommand\thesubsubsubsection{\thesubsubsection.\arabic{subsubsubsection}}
\renewcommand\theparagraph{\thesubsubsubsection.\arabic{paragraph}} % optional; useful if paragraphs are to be numbered

\titleformat{\subsubsubsection}
{\normalfont\normalsize\bfseries}{\thesubsubsubsection}{1em}{}
\titlespacing*{\subsubsubsection}{0pt}{\parskip}{-\parskip}

\makeatletter
\renewcommand\paragraph{\@startsection{paragraph}{5}{\z@}%
{0pt}%
{-1em}%
{\normalfont\normalsize\bfseries}}
%\renewcommand\subparagraph{\@startsection{subparagraph}{6}{\parindent}%
%  {3.25ex \@plus1ex \@minus .2ex}%
%  {-1em}%
%  {\normalfont\normalsize\bfseries}}
\def\toclevel@subsubsubsection{4}
\def\toclevel@paragraph{5}
\def\toclevel@paragraph{6}
\def\l@subsubsubsection{\@dottedtocline{4}{7em}{4.5em}}
\def\l@paragraph{\@dottedtocline{5}{10em}{5em}}
\def\l@subparagraph{\@dottedtocline{6}{14em}{6em}}
\makeatother

\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% end \subsubsubsection definition     %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%\titlespacing*{\section}{0pt}{0.7\baselineskip}{0.7\baselineskip}


\lstdefinelanguage[ARM]{Assembler}%
{morekeywords={lsls,lsrs,asrs,movs,adds,subs,cmp,ands,eors,adcs,sbcs,rors,
tst,rsbs,cmn,orrs,muls,bics,mvns,negs,str,ldr,b,beq,bne,bcs,bcc,bmi,bpl,bvs,
bvc,bhi,bls,bge,blt,bgt,ble,bal,bnv,add,sub,sp},%
morekeywords=[2]{sp,.2byte,.4byte,.8byte,.abort,.abort,.align,.altmacro,     %
.arch,.arch_extension,.arm,.ascii,.asciz,.balign,.bss,                  %
.bundle_align_mode,.bundle_lock,,.bundle_unlock,.byte,.cantunwind,      %
.cfi_endproc,,.cfi_startproc,.code,.comm,.cpu,.data,.def,.desc,.dim,    %
.dn,.double,.eabi_attribute,.eject,.else,.elseif,.end,.endef,.endfunc,  %
.endif,.equ,.equiv,.eqv,.err,.error,.even,.exitm,.extend,.extend.,      %
.extern,.fail,.file,.fill,.float,.fnend,.fnstart,.force_thumb,.fpu,     %
.func,.global,.globl,.gnu_attribute,.handlerdata,.hidden,.hword,        %
.ident,.if,.incbin,.include,.inst,.inst.n,.inst.w,.int,.internal,.irp,  %
.irpc,.lcomm,.ldouble,.lflags,.line,.linkonce,.list,.ln,.loc,           %
.loc_mark_labels,.local,.long,.ltorg,.ltorg.,.macro,.movsp,.mri,        %
.noaltmacro,.nolist,.object_arch,.octa,.offset,.org,.p2align,.packed,   %
.pad,.personality,.personalityindex,.pool,.popsection,.previous,        %
.print,.protected,.psize,.purgem,.pushsection,.qn,.quad,.reloc,.rept,   %
.req,.save,.sbttl,.scl,.secrel32,.section,.set,.setfp,.short,.single,   %
.size,.skip,.sleb128,.space,.stabd,,.stabn,,.stabs,.string,.string16,   %
.string32,.string64,.string8,.struct,.subsection,.symver,.syntax,.tag,  %
.text,.thumb,.thumb_func,.thumb_set,.title,.tlsdescseq,.type,.uleb128,  %
.unreq,.unwind_raw,.val,.version,.vsave,.vtable_entry,.vtable_inherit,  %
.warning,.weak,.weakref,.word},%
alsoletter={.,0,1,2,3,4,5,6,7,8,9},%
alsodigit={?},%
sensitive=false,%
morestring=[b]",%
morecomment=[s]{/*}{*/},%
morecomment=[l]@,%
morecomment=[l]//,%
}[keywords,comments,strings]
\endinput
%\lstset{xleftmargin=.25in}
